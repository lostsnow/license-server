

    	<div id="lqw_msg"></div>
        <div style=" width:1092px;">
        <div style="text-align:right">
        	姓名（ID）：<input type="text" id="id" style="margin: 0 auto; width:100px;" data-provide="typeahead" data-items="4" data-source=''>&nbsp;&nbsp;
 <!--          用户：<input type="text" id="user" style="margin: 0 auto; width:100px;" data-provide="typeahead" data-items="4" data-source=''>&nbsp;&nbsp;
            设备类型：<input type="text" id="mactype" style="margin: 0 auto; width:100px;" data-provide="typeahead" data-items="4" data-source=''>&nbsp;&nbsp;
            SN：<input type="text" id="SN" style="margin: 0 auto; width:150px;" data-provide="typeahead" data-items="4" data-source=''>&nbsp;&nbsp;
            MAC：<input type="text" id="MAC" style="margin: 0 auto; width:150px;" data-provide="typeahead" data-items="4" data-source=''>
      -->      <button id="search" onClick="doSearch()" class="btn btn-primary">查询</button>
            <button id="back" onClick="doBack()" class="btn btn-success">返回</button>
        </div><br/>
        <div id="dataBody" class="span11 panel">
            <div class="panel-header">
                <i class="icon-list-alt icon-blue"></i>
                <h2>用户管理</h2>
                <!--<div class="actions-bar">
                    <div class="btn-group pull-right">
                        <a class="btn btn-success btn-mini">操作</a>
                        <a class="btn btn-success btn-mini dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="javascript:addDevice();"><i class="icon-plus"></i> 添加新设备</a></li>
                            <li><a href="javascript:delMDevice();"><i class="icon-remove"></i> 删除多个设备</a></li>
                        </ul>
                    </div>
                </div>-->
            </div>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                    <tr>
                        <th></th>
                        <th>姓名（ID）</th>
                        <th>权限</th>                                                                               
                    </tr>
                    <!--
                    <tr class="filters">
                        <td>&nbsp;</td>
                        <td><input type="text" maxlength="11" name="id"></td>
                        <td><input type="text" maxlength="128" name="name"></td>
                        <td class="hidden-phone"><input type="text" maxlength="128" name="email"></td>
                        <td class="hidden-phone">
                            <select name="status">
                                <option value=""></option>
                                <option value="10">User</option>
                                <option value="12">Administrator</option>
                                <option value="12">Editor</option>
                            </select>
                        </td>
                        <td class="hidden-phone"><input type="text" maxlength="128" name="lastVisit"></td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    -->
                </thead>
                <tbody id='body'>
<!--                    <tr>
                        <td></td>
                        <td>1</td>
                        <td>M880</td>
                        <td>小明</td>
                        <td>2013-03-27 11:09</td>
                        <td>1234567890123</td>
                        <td>00:02:3F:4D:5F:AA</td>
                        <td>SE</td>
                    </tr>
 -->
                </tbody>
              <!--  <tr class="table-operations">
                    <td class="selections"><input class="selection select-all" type="checkbox" value="1"></td>
                    <td colspan="7" class="operations">
                        <a class="btn btn-small btn-success" id="checkall" ><i class="icon-ok"></i> 全选</a>
                        <a class="btn btn-small btn-warning" id="checkinverse"><i class="icon-remove"></i>反选</a>
                    </td>
                </tr>
                -->
            </table>

            <div id="pageM" class="pagination pull-right">
                <!--<ul>
                    
                    <li><a href="javascript:void(0);">5</a></li>
                    <li><a href="javascript:void(0);">下一页</a></li>-->
                <!--<li><a href="javascript:void(0);" style="width:1px;" ><span class="caret" style="vertical-align:middle; text-align:center;"></span></a></li>-->
                <!--<li>去<input type="text" id="textfield" style="width:15px;" size="3" maxlength="3" />页&nbsp;<span style="color:#0088CC;">确定</span></li>
            </ul>-->
            </div>


            <div class="clear"></div>
        </div><!--/span-->
        </div>

        <!--<div class="modal hide" id="operations-modal">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">×</button>
                <h3 class="operations-modal-header">Modal header</h3>
            </div>
            <div class="modal-body">
                <p class="operations-modal">One fine body…</p>
            </div>
            <div class="modal-footer">
                <a  id="cls" href="javascript:void(0);" class="btn" data-dismiss="modal">关闭</a>
                <a id="doit" href="javascript:void(0);" class="btn btn-primary" >确定</a>
            </div>
        </div>-->


        <script type="text/javascript">
			var currentP = 1;
			
			$(document).ready(function(){							
			});
			
			function cleanpage(){
			
			}
		function pad(num, n) {  
		    var len = num.toString().length;  
		    while(len < n) {  
	        num = "0" + num;  
	        len++;  
			    }  
			return num;  
		}  

	
	function getLocalTime1(nS) {   
   		return new Date(parseInt(nS) * 1000).toLocaleString().replace(/:\d{1,2}$/,' ');   
	}		
   
   	function getLocalTime2(nS) {   
    	return new Date(parseInt(nS) * 1000).toLocaleString().substr(0,24)
	}
	
	function getLocalTime3(nS) {   
   		return new Date(parseInt(nS) * 1000).toLocaleString().replace(/年|月/g, "-").replace(/日/g, " ");    
	}
	function getLocalTime4(nS) {   
   		var d = new Date(parseInt(nS) * 1000);
		var s = '';
		s+=(d.getYear()+1900)+'-';
		s+=pad((d.getMonth()+1),2)+'-';
		s+=pad(d.getDate(),2)+' ';
		s+=pad(d.getHours(),2)+':';
		s+=pad(d.getMinutes(),2)+':';
		s+=pad(d.getSeconds(),2);
		return s   
	}
			
	function pageInit( pages , size , flag ){
	if( typeof( pages ) == 'undefined' || typeof( size ) == 'undefined' ){ return; }
	var html = '<span style="color:#0088CC">共' + size + '条&nbsp;</span><ul>';
//		var html = '<span style="color:#0088CC">共' + pages + '页&nbsp;</span><ul>';
	if( flag ) html = '<span style="color:#0088CC">共' + size + '批次&nbsp;</span><ul>';
	if( currentP != 1 ) html += '<li><a href="javascript:toPage(\'up\')">上一页</a></li>';
	var start = 1, end = pages, index = 1, list = {};
	if( pages > 5 ){
		mid = '......'
		if ( currentP < 3 ){
			end = 3;
		}else if( currentP != pages ){
			start = currentP - 3 + 1;
			end = currentP;
		}else if( currentP == pages ){
			start = currentP - 3;
			end = currentP -1;
		}
		for( var i = start; i <= end; i++ ){
			var c = i == currentP ? 'class="active"' : "";
			list[ index++ ] = { 'class':c, 'page':i, 'e':"javascript:toPage(" + i + ")" };
		}
		list[ index++ ] = { 'class':'', 'page':'......', 'e':"javascript:void(0);" };
		var c = pages == currentP ? 'class="active"' : "";
		list[ index++ ] = { 'class':c, 'page':pages, 'e':"javascript:toPage(" + pages + ")" };
	}else if( pages == 5 ){
		for( var i = 1; i <= 5; i++ ){
			var c = i == currentP ? 'class="active"' : "";
			list[ index++ ] = { 'class':c, 'page':i, 'e':"javascript:toPage(" + i + ")" };
		}
	}else{
		for( var i = 1; i <= pages; i++ ){
			var c = (i == currentP ? 'class="active"' : "");
			list[ index++ ] = { 'class':c, 'page':i, 'e':"javascript:toPage(" + i + ")" };
		}
	}
	
	for( var o in list ){
		var l = list[ o ];
		html += '<li ' + l['class'] + ' ><a href="' + l.e + '">' + l.page + '</a></li>';
	}
	if( currentP != pages ) html += '<li><a href="javascript:toPage(\'down\')">下一页</a></li>';
	html += '<li>去<input type="text" id="toP" style="width:15px;"/>页&nbsp;<span style="color:#0088CC; cursor:pointer;" onclick="javascript:toPage(0)" >确定</span></li>';
	html += '</ul>';
	$('#pageM').html( html );
}

function toPage( num ){
	if( num == 'up' ){
		num = --currentP;
	}else if( num == 'down' ){
		num = ++currentP;
	}else if( num==0 ) {
		num = $('#toP').val();
		if( num == '' ) num = 0;
		if( data && (num < 1 || num > data.pages ) ) {
			alert("请输入合理的大小");
//			newDialog( { title : '提示', content : '请合理输入，员码范围：1~' + data.pages + '!', bodyClass : 'alert-danger', id : 'pageInfo' } );
			return;
		}
	}
	currentP = num ;
	doit(condition);
}
			
			
			function fillData(list){
				var html=''
				for(o in list){
				var row=list[o];
				var privilege=''
				if(row["privilege"]==1) privilege+="管理员"
					html+='<tr>'+'<td>'+'</td>'+'<td>'+(row["name"] || '')+'</td>'+'<td>'+privilege+'</td>'+'</tr>'				
					$('#body').html( html );
				}
			}
       	
			function isNull( val){
				if ( val==null || typeof val =='undefined' ) return true
				return false;
			}
			
	function loadData( url, executeFn, data, method, dataType ){
		if( url.indexOf( '.html' ) > 0 ){
			currentP = 1;
			url = '/webPage/' + url;
		}
	//	$( '#clsBtn' ).trigger( 'click' );
		url = isNull( url ) ? "" : url;
		exectueFn = isNull( executeFn ) ? function(msg){} : executeFn;
		method = isNull( method ) ? "get" : method;
		dataType = isNull( dataType ) ? "text" : dataType;
		data = data || "";
		complete = {};
		$.ajax({
			url: url,
			cache: false,
			data : data,
			dataType : dataType,
			type: method,
//			complete:function( status ){
	//			ajaxStatus = status;
		//	},
			success: function(html){
				//console.log(html);
		/*		if( method == 'post' ){
					try{
						var objs=eval(html);
					}catch(e){
						eval("var objs=" + html);
					}
					var cls = ''
					if( objs.ret < 0 ) cls = 'alert alert-warning';
					else cls = 'alert alert-success';
					newDialog( { title : '提示', content : ( objs.msg ||'操作成功！' ), bodyClass : cls } );
				}
			*/	
			executeFn(html);
			}
		});
	}
	
	
			
			function doit(condition){
				cleanpage()
				if( typeof( condition ) != 'string') condition = "";
				loadData( '/manage/user?page=' + (currentP || 1) + condition , function( msg ){
					try{
						var objs=eval(msg);
					}catch(e){
						eval("var objs=" + msg);
					}
				//	$("#lqw_msg").html(getLocalTime1(1365768425));		//Fri Apr 12 2013 20:07:05 GMT+0800 (中国标准时间)
				//	$("#lqw_msg").html(getLocalTime2(1365768425));		//Fri Apr 12 2013 2
				//	$("#lqw_msg").html(getLocalTime3(1365768425));		//Fri Apr 12 2013 20:07:05 GMT+0800 (中国标准时间)
				//	$("#lqw_msg").html(getLocalTime4(1365768425));      //Fri Apr 12 2013 20:07:05 GMT+0800 (中国标准时间)
					if(objs.size>0)
					fillData( objs.license );
					data.size = objs.size;
					data.pages = objs.pages;
					//alert(objs.size,objs.pages)
					
				    
					pageInit( objs.pages, objs.size );
				
				/*	
					var cdtn = "";
					if( objs.sns ){
						for( var sn in objs.sns ){
							cdtn += '"' + objs.sns[sn] + '",';
						}	
					}
					cdtn = cdtn.substring( 0, cdtn.length-1 );
					$("#condition").attr("data-source", "[" + cdtn + "]");
					pageInit( objs.pages, objs.size );										
					bindEvent();
					if( lineStatus == null ) online();
					*/
				} );
			}
			
			function doSearch(){
				data={}
				var id=$('#id').val();
				if(id){
					id="&name="+id;
				}
				condition = id ;
				currentP = 1;
			//	alert(condition);
				doit(condition)
			}
		</script>